(window.mvtrellisJsonp=window.mvtrellisJsonp||[]).push([[6],{3:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){var t={};e.root&&(t.root=e.root),e.headers&&(t.headers=e.headers);var n=function(e,n){var r,a=e,o=null!=t&&null!==(r=t.root)&&void 0!==r&&r.includes("?")?e.replace("?","&"):e;t&&t.root&&(a="".concat(t.root).concat(o));var c=n;if(t&&t.headers&&(c.headers=t.headers),!c.headers){var i=new Headers;i.append("Content-Type","application/json"),i.append("Accept","application/json"),c.headers=i}return fetch(a,c).then((function(e){return e.json().then((function(t){var n={};n.data=t,n.ok=e.ok;var r={};return e.headers.forEach((function(e,t){r[t]=e})),n.headers=r,n}))})).then((function(e){return e.ok?e:Promise.reject(e)})).catch((function(e){return Promise.reject(e)}))};return{get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={method:"GET"};if(t){var a=Object.keys(t).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(t[e]))})).join("&");e="".concat(e,"?").concat(a)}return n(e,r)},post:function(e,t){var r={method:"POST",body:JSON.stringify(t)};return n(e,r)},put:function(e,t){var r={method:"PUT",body:JSON.stringify(t)};return n(e,r)},delete:function(e,t){var r={method:"DELETE",body:JSON.stringify(t)};return n(e,r)}}}},31:function(e,t,n){"use strict";var r=/%(?:\d\$)?s/,a=function(e){var t,n=window.mvt.i18n[e.toUpperCase().replace(" ","_")];return n?n.match(r)?(t=n,function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return n.every((function(e){return"string"==typeof e}))?n.reduce((function(e,t){return e.replace(r,t)}),t):t.split(r).reduce((function(e,t,r){return React.createElement("span",null,e,t,n[r]||null)}),null)}):n:function(){return""}};t.a=a},41:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c}));var r=n(30),a=r.default.createElement("svg",{width:"12px",height:"11px",viewBox:"0 0 12 11",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.default.createElement("g",{id:"blog-post-(desktop)-copy",transform:"translate(-634.000000, -815.000000)",fill:"#41A4A9"},r.default.createElement("path",{d:"M645.645136,819.779402 C644.921776,818.003426 642.968656,817.115439 639.785296,817.115439 L638.285776,817.115439 L638.285776,815.423334 C638.285776,815.30819 638.243536,815.209156 638.158576,815.125759 C638.073616,815.041888 637.973296,815.00019 637.857136,815.00019 C637.740976,815.00019 637.640656,815.041888 637.555696,815.125759 L634.127056,818.509968 C634.042576,818.594313 633.999856,818.693346 633.999856,818.807543 C633.999856,818.922214 634.042576,819.021248 634.127056,819.105119 L637.555696,822.489802 C637.640656,822.573199 637.740976,822.615371 637.857136,822.615371 C637.973296,822.615371 638.073616,822.573199 638.158576,822.489802 C638.243536,822.405931 638.285776,822.306897 638.285776,822.192226 L638.285776,820.500122 L639.785776,820.500122 C640.223056,820.500122 640.614736,820.512916 640.960816,820.539451 C641.306416,820.565986 641.650576,820.613371 641.991856,820.681605 C642.333616,820.749839 642.630256,820.84366 642.882736,820.962596 C643.135216,821.082005 643.370416,821.235057 643.589296,821.422226 C643.808176,821.609396 643.986736,821.832103 644.124976,822.089876 C644.263216,822.347648 644.371696,822.652805 644.449936,823.005346 C644.527696,823.357888 644.567056,823.756866 644.567056,824.201808 C644.567056,824.443943 644.555536,824.715457 644.533456,825.014928 C644.533456,825.04099 644.527696,825.093113 644.516656,825.169876 C644.505616,825.247586 644.499856,825.30587 644.499856,825.345199 C644.499856,825.411063 644.519056,825.466503 644.556976,825.510571 C644.594896,825.554639 644.647216,825.576436 644.714416,825.576436 C644.785456,825.576436 644.848336,825.539002 644.902096,825.464134 C644.933296,825.424805 644.962096,825.375999 644.988976,825.318663 C645.015376,825.261328 645.045616,825.195463 645.079216,825.120122 C645.112816,825.045254 645.136336,824.992657 645.149776,824.961857 C645.716176,823.706165 645.999856,822.712036 645.999856,821.980891 C645.999856,821.103802 645.881776,820.369814 645.645136,819.779402",id:"Fill-1"})))),o=r.default.createElement("svg",{width:"12px",height:"6px",viewBox:"0 0 12 6",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.default.createElement("g",{id:"show-more-comments",transform:"translate(-954.000000, -1370.000000)",fill:"#919191"},r.default.createElement("polygon",{id:"Triangle",transform:"translate(960.000000, 1373.000000) rotate(-180.000000) translate(-960.000000, -1373.000000) ",points:"960 1370 966 1376 954 1376"})))),c=r.default.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.default.createElement("g",{id:"icons",transform:"translate(-195.000000, -418.000000)",fill:"#DA7A7A"},r.default.createElement("path",{d:"M201.234968,435.683587 C198.553161,433.001006 198.159871,428.892361 200.038839,425.781652 L211.136903,436.879716 C208.025419,438.758684 203.917548,438.364619 201.234968,435.683587 M212.677548,424.241006 C215.359355,426.923587 215.752645,431.032232 213.873677,434.142942 L202.774065,423.043329 C204.024387,422.284619 205.456645,421.8712 206.957032,421.8712 C209.117806,421.8712 211.14929,422.712748 212.677548,424.241006 M215.414323,421.504232 C213.155226,419.244361 210.152129,418.000232 206.957032,418.000232 C203.761161,418.000232 200.75729,419.244361 198.498194,421.504232 C193.833677,426.1672 193.833677,433.756619 198.498194,438.420361 C200.830065,440.752232 203.893548,441.918942 206.957032,441.918942 C210.019742,441.918942 213.083226,440.752232 215.414323,438.420361 C220.078839,433.756619 220.078839,426.1672 215.414323,421.504232",id:"iconError"}))))},42:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"g",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"h",(function(){return v})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return E})),n.d(t,"f",(function(){return C}));var r=n(33),a=n.n(r),o=n(57),c=n.n(o),i=n(30),u=n(31),s=["children","as"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d="mvt_comments",f=function(e){var t=e.children,n=e.as,r=void 0===n?"div":n,a=c()(e,s);return i.default.createElement(r,m({dangerouslySetInnerHTML:{__html:t}},a))},p=function(e){var t=document.getElementsByTagName("html")[0].getAttribute("lang"),n=new Date(e),r=n.toLocaleTimeString(t,{hour:"2-digit",minute:"2-digit"}),a=n.toLocaleString(t,{year:"numeric",month:"long",day:"numeric"});return"".concat(a," ").concat(Object(u.a)("AT")," ").concat(r)},h=function(e){return localStorage.getItem(d)||localStorage.setItem(d,JSON.stringify({})),JSON.parse(localStorage.getItem(d))[e]},v=function(e){localStorage.setItem(d,JSON.stringify(e))},g=function(e){var t=JSON.parse(localStorage.getItem(d)),n=t.comments&&t.comments.filter((function(t){var n=t.id;return!e.some((function(e){return e.id===n}))}))||[],r=m(m({},t),{},{comments:n});localStorage.setItem(d,JSON.stringify(r))};function b(e){var t=e.author_name,n=e.author_email,r=e.content;return mvt.options.require_name_email?r.trim().length&&n.trim().length&&t.trim().length:r.trim().length}function E(e,t){return e.reduce((function(e,n,r){var a=Math.floor(r/t);return e[a]=[].concat(e[a]||[],n),e}),[])}function C(e,t){var n=e.reduce((function(e,t){return e.some((function(e){return e.id===t.id&&e.author_name===t.author_name}))||e.push(t),e}),[]);return"desc"===t?n.sort((function(e,t){return e.id<t.id?1:-1})):n.sort((function(e,t){return e.id>t.id?1:-1}))}},45:function(e,t,n){"use strict";(function(e){var r=n(40),a=n.n(r),o=n(1),c=n.n(o),i=n(34),u=n.n(i),s=n(35),l=n.n(s),m=n(32),d=n.n(m),f=n(36),p=n.n(f),h=n(37),v=n.n(h),g=n(38),b=n.n(g),E=n(33),C=n.n(E),O=n(0),w=n.n(O),y=n(30),_=n(43),j=n(54),S=n(31),R=(n(56),n(42));function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){C()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var a=b()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return v()(this,n)}}var A=function(e){p()(n,e);var t=x(n);function n(e){var r;return u()(this,n),r=t.call(this,e),C()(d()(r),"handleResize",(function(e){e.rows=4;var t=e.scrollHeight,n=Math.floor(t/18);e.rows=n,r.setState({rows:n})})),C()(d()(r),"onChange",(function(e){var t=e.target,n=t.name,a=t.value;r.setState({comment:N(N({},r.state.comment),{},C()({},n,a)),status:"idle"})})),C()(d()(r),"onContentChange",(function(e){var t=e.target;r.handleResize(t),r.setState({comment:N(N({},r.state.comment),{},{content:t.value}),status:"idle"})})),C()(d()(r),"onSubmit",function(){var e=c()(w.a.mark((function e(t){var n,o,c,i,u,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=r.props,o=n.parent,c=n.postId,r.setState({status:"posting"}),e.prev=3,e.next=6,r.props.handleSubmit(N(N({},r.state.comment),{},{parent:o,post:c}));case 6:i=e.sent,u=Object(R.c)("comments")||[],Object(R.h)({author_name:r.state.comment.author_name,author_email:r.state.comment.author_email,comments:[].concat(a()(u),[i])}),r.setState(N(N({},r.state),{},{comment:{author_name:Object(R.c)("author_name"),author_email:Object(R.c)("author_email"),content:""},status:"posted"})),r.timeout=setTimeout((function(){r.setState({status:"idle"},(function(){return r.props.hideForm()}))}),2e3),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),s=e.t0.data.code,r.setState({status:"error",errorCode:s});case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}()),r.state={status:"idle",rows:4,comment:{author_name:Object(R.c)("author_name")||"",author_email:Object(R.c)("author_email")||"",content:e.parentAuthor?"@".concat(e.parentAuthor,", "):""},errorCode:"",valid:!1},r}return l()(n,[{key:"componentDidMount",value:function(){var e=this;this.el&&setTimeout((function(){return e.handleResize(e.el)}),0),this.setState({valid:Object(R.d)(this.state.comment)})}},{key:"componentWillUnmount",value:function(){this.timeout&&clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this,t=this.state,n=t.status,r=t.errorCode,a=this.state.comment,o=a.author_name,c=a.author_email,i=a.content,u=this.props.parent;return y.default.createElement("form",{className:"trellis-comment-form"},y.default.createElement("label",{htmlFor:"content"},"Comment"),y.default.createElement("textarea",{name:"content",id:"content",value:i,onChange:this.onContentChange,placeholder:u?Object(S.a)("REPLY_PLACEHOLDER"):Object(S.a)("COMMENT_PLACEHOLDER"),rows:this.state.rows||3,ref:function(t){e.el=t},required:!0}),y.default.createElement("div",{className:"trellis-comment-form-outer-box"},y.default.createElement("div",{className:"trellis-comment-form-box"},y.default.createElement("div",{className:"trellis-comment-form-box-inputGroup"},y.default.createElement("label",{htmlFor:"author_name"},mvt.options.require_name_email?"Name *":"Name"),y.default.createElement("input",{name:"author_name",id:"author_name",value:o,onChange:this.onChange,placeholder:Object(S.a)("NAME")})),y.default.createElement("div",{className:"trellis-comment-form-box-inputGroup"},y.default.createElement("label",{htmlFor:"author_email"},mvt.options.require_name_email?"Email *":"Email"),y.default.createElement("input",{type:"email",name:"author_email",id:"author_email",value:c,onChange:this.onChange,placeholder:Object(S.a)("EMAIL")})),y.default.createElement("button",{type:"button",className:"trellis-comment-form-button",onClick:this.onSubmit,disabled:"idle"!==n||!Object(R.d)(this.state.comment)},u?Object(S.a)("REPLY"):Object(S.a)("COMMENT"))),y.default.createElement(j.a,{status:n,errorCode:r})))}}]),n}(y.Component);t.a=Object(_.hot)(e)(A),A.defaultProps={hideForm:function(){return null},parent:0}}).call(this,n(39)(e))},46:function(e,t,n){"use strict";var r=n(34),a=n.n(r),o=n(35),c=n.n(o),i=n(32),u=n.n(i),s=n(36),l=n.n(s),m=n(37),d=n.n(m),f=n(38),p=n.n(f),h=n(33),v=n.n(h),g=n(30),b=n(41),E=n(31);n(61);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d()(this,n)}}var O=function(e){l()(n,e);var t=C(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(u()(r),"onLoadMore",(function(){r.setState({status:"active"}),r.props.onAction(),r.timeout=setTimeout((function(){r.setState({status:"idle"})}),500)})),r.state={status:"idle"},r}return c()(n,[{key:"componentWillUnmount",value:function(){this.timeout&&clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this;return g.default.createElement("div",{role:"button",tabIndex:0,ref:function(t){e.showMore=t},className:"load-more-wrapper",onClick:this.onLoadMore},g.default.createElement("div",{className:"load-more-text"},"idle"===this.state.status?Object(E.a)("SHOW_MORE"):Object(E.a)("LOADING")),g.default.createElement("div",{className:"load-more-arrow"},b.a))}}]),n}(g.Component);t.a=O},47:function(e,t,n){"use strict";(function(e){var r=n(1),a=n.n(r),o=n(40),c=n.n(o),i=n(34),u=n.n(i),s=n(35),l=n.n(s),m=n(32),d=n.n(m),f=n(36),p=n.n(f),h=n(37),v=n.n(h),g=n(38),b=n.n(g),E=n(33),C=n.n(E),O=n(0),w=n.n(O),y=n(30),_=n(43),j=n(3),S=n(31),R=n(45),P=n(60),N=n(46),x=(n(62),n(42));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var a=b()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return v()(this,n)}}var k=function(e){p()(n,e);var t=A(n);function n(e){var r;return u()(this,n),r=t.call(this,e),C()(d()(r),"componentDidMount",(function(){if(r.getComments(),r.formWrap){if(!r.proxyForm)return;r.formWrap.appendChild(r.proxyForm),c()(r.proxyForm.children).forEach((function(e){e.style.margin="0"})),r.proxyForm.addEventListener("submit",(function(e){return e.preventDefault(),!1}))}})),C()(d()(r),"prepCommentState",(function(e){var t=e.filter((function(e){return 0===e.parent})),n=t.length,a=window.mvt.comments.page_comments&&Number.isInteger(window.mvt.comments.per_page)?window.mvt.comments.per_page:20,o=Object(x.e)(t,a),c=Math.ceil(n/a),i=e.length-r.state.pendingComments.length,u=e.filter((function(e){return 0!==e.parent}));return{comments:e,totalComments:n,pagedComments:o,totalPages:c,totalCommentsWithChildren:i,childComments:u}})),C()(d()(r),"getAllComments",function(){var e=a()(w.a.mark((function e(t,n){var a,o,c,i,u,s=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>2&&void 0!==s[2]?s[2]:1,e.next=3,I.get("wp/v2/comments?post=".concat(t,"&order=").concat(n,"&per_page=100&page=").concat(a));case 3:if(o=e.sent,c=(null==o?void 0:o.data)||[],i=r.mergeComments(c),u=r.prepCommentState(i),r.timeout=setTimeout((function(){r.setState({comments:i,totalComments:u.totalComments,pagedComments:u.pagedComments,totalPages:u.totalPages,totalCommentsWithChildren:u.totalCommentsWithChildren,childComments:u.childComments})}),0),!(o.headers["x-wp-totalpages"]>a)){e.next=11;break}return e.next=11,r.getAllComments(t,n,a+1);case 11:return e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),C()(d()(r),"getComments",a()(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="asc"===window.mvt.comments.order?"asc":"desc",e.next=3,r.getAllComments(r.props.postId,t);case 3:e.sent,r.setState((function(e){return{currentPage:e.currentPage+1}}));case 5:case"end":return e.stop()}}),e)})))),C()(d()(r),"mergeComments",(function(e){var t=r.state.comments,n=r.props.postId,a=Object(x.c)("comments"),o=a&&a.filter((function(e){return 0===e.parent&&e.post===n}))||[],i=o.filter((function(t){var n=t.id;return e.find((function(e){return e.id===n}))}));Object(x.b)(i);var u=[].concat(c()(t),c()(o.filter((function(t){var n=t.id;return!e.find((function(e){return e.id===n}))}))),c()(e));return Object(x.f)(u,window.mvt.comments.order)})),C()(d()(r),"handleSubmit",function(){var e=a()(w.a.mark((function e(t){var n,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.meta={},new FormData(r.proxyForm).forEach((function(e,n){n.startsWith("_")||(t.meta[n]=e)})),e.next=5,I.post("wp/v2/comments",t);case 5:return n=e.sent,a=n.data,r.setState((function(e){return{comments:[a].concat(c()(e.comments)),totalComments:e.totalComments+1,pendingComments:[].concat(c()(e.pendingComments),[a])}})),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),C()(d()(r),"handleLoadMore",(function(){r.setState((function(e){return{currentPage:e.currentPage+1}}))})),r.proxyForm=r.props.form,r.proxyForm&&document.body.appendChild(r.proxyForm),r.state={comments:[],pagedComments:[[]],pendingComments:[],currentPage:0,totalComments:0,totalPages:0,totalCommentsWithChildren:0},r}return l()(n,[{key:"componentWillUnmount",value:function(){this.timeout&&clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this,t=this.state,n=t.comments,r=t.totalComments,a=t.pagedComments,o=t.pendingComments,i=t.currentPage,u=t.totalPages,s=t.totalCommentsWithChildren,l=t.childComments,m=[].concat(c()(o||[]),c()((null==a?void 0:a.filter((function(e,t){return t<i})).flatMap((function(e){return e})))||[]));return y.default.createElement("div",{className:"trellis-comments"},window.mvt.comments.enabled&&y.default.createElement(y.default.Fragment,null,y.default.createElement("p",{className:"post-title"},s||""," ",1===s?Object(S.a)("COMMENT"):Object(S.a)("COMMENTS")),y.default.createElement("div",{ref:function(t){e.formWrap=t}}),y.default.createElement(R.a,{postId:this.props.postId,handleSubmit:this.handleSubmit})),!window.mvt.comments.enabled&&window.mvt.comments.has_comments>0&&y.default.createElement("p",{className:"post-title"},"Comments are closed"),m.map((function(t){var n=l.filter((function(e){return e.parent===t.id}));return y.default.createElement(P.a,{key:t.id,comment:t,postId:e.props.postId,parentComment:t.parent,children:n,childComments:l})})),0!==n.length&&u>1&&i+1<=u&&m.length<r&&y.default.createElement(N.a,{onAction:this.handleLoadMore}))}}]),n}(y.Component),I=Object(j.a)({root:window.mvt.rest_url});t.a=Object(_.hot)(e)(k)}).call(this,n(39)(e))},54:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(30),a=n(41),o=n(31),c=(n(55),function(e){var t=e.kind,n=e.message,a=e.header,o=e.icon;return r.default.createElement("div",{className:"trellis-comment-notification trellis-comment-notification--".concat(t)},r.default.createElement("div",{className:"trellis-comment-notification-box"},o&&r.default.createElement("div",{className:"trellis-comment-notification-icon"},o),r.default.createElement("div",{className:"trellis-comment-notification-text"},a&&r.default.createElement("h4",{className:"trellis-comment-notification-header"},a),r.default.createElement("div",{className:"trellis-comment-notification-message"},n))))}),i=function(e){switch(e.code){case"comment_flood":return r.default.createElement(c,{kind:"danger",message:Object(o.a)("FLOOD_MESSAGE"),header:Object(o.a)("FLOOD_HEADER"),icon:a.b});case"comment_duplicate":return r.default.createElement(c,{kind:"danger",message:Object(o.a)("DUPLICATE_MESSAGE"),header:Object(o.a)("DUPLICATE_HEADER"),icon:a.b});case"rest_invalid_param":return r.default.createElement(c,{kind:"danger",message:Object(o.a)("INVALID_PARAM_MESSAGE"),header:Object(o.a)("INVALID_PARAM_HEADER"),icon:a.b});case"rest_comment_content_invalid":return r.default.createElement(c,{kind:"danger",message:Object(o.a)("INVALID_CONTENT_MESSAGE"),header:Object(o.a)("INVALID_CONTENT_HEADER"),icon:a.b});case"rest_comment_author_data_required":return r.default.createElement(c,{kind:"danger",message:Object(o.a)("AUTHOR_REQUIRED_MESSAGE"),header:Object(o.a)("AUTHOR_REQUIRED_HEADER"),icon:a.b});default:return r.default.createElement(c,{kind:"danger",message:Object(o.a)("GENERIC_ERROR"),icon:a.b})}return null},u=function(e){var t=e.status,n=e.errorCode;switch(t){case"posting":return r.default.createElement(c,{kind:"warning",message:Object(o.a)("PLEASE_WAIT")});case"posted":return r.default.createElement(c,{kind:"success",message:Object(o.a)("COMMENT_POSTED")});case"error":return r.default.createElement(i,{code:n});case"idle":default:return null}}},55:function(e,t,n){},56:function(e,t,n){},60:function(e,t,n){"use strict";(function(e){var r=n(40),a=n.n(r),o=n(1),c=n.n(o),i=n(34),u=n.n(i),s=n(35),l=n.n(s),m=n(32),d=n.n(m),f=n(36),p=n.n(f),h=n(37),v=n.n(h),g=n(38),b=n.n(g),E=n(33),C=n.n(E),O=n(0),w=n.n(O),y=n(30),_=n(43),j=n(45),S=n(3),R=n(31),P=n(41),N=n(42),x=n(46);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var a=b()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return v()(this,n)}}var k=function(e){p()(n,e);var t=A(n);function n(e){var r;return u()(this,n),r=t.call(this,e),C()(d()(r),"getReplies",c()(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.props.children||[],r.mergeReplies(t);case 2:case"end":return e.stop()}}),e)})))),C()(d()(r),"pageReplies",(function(e){var t=window.mvt.comments.page_comments&&Number.isInteger(window.mvt.comments.per_page)?window.mvt.comments.per_page:20,n=Object(N.e)(e,t),r=e.length;return{replies:e,pagedReplies:n,totalPages:Math.ceil(r/t)}})),C()(d()(r),"mergeReplies",(function(e){var t=r.state.replies,n=r.props.comment,o=Object(N.c)("comments").filter((function(e){return e.parent===n.id})),c=o.filter((function(t){var n=t.id;return e.find((function(e){return e.id===n}))}));Object(N.b)(c);var i=[].concat(a()(t),a()(e),a()(o.filter((function(t){var n=t.id;return!e.find((function(e){return e.id===n}))})))),u=Object(N.f)(i,"asc"),s=r.pageReplies(u);return r.setState((function(e){return{replies:u,pagedReplies:s.pagedReplies,totalPages:s.totalPages}})),u})),C()(d()(r),"handleReply",(function(){r.setState({showForm:!r.state.showForm})})),C()(d()(r),"handleHideForm",(function(){r.setState({showForm:!1})})),C()(d()(r),"handleSubmit",function(){var e=c()(w.a.mark((function e(t){var n,o;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.post("wp/v2/comments",t);case 2:return n=e.sent,o=n.data,r.setState((function(e){return{pendingReplies:[].concat(a()(e.pendingReplies),[o])}})),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),C()(d()(r),"handleLoadMore",(function(){r.setState((function(e){return{currentPage:e.currentPage+1}}))})),r.state={showForm:!1,replies:[],pendingReplies:[],currentPage:1,totalPages:0},r}return l()(n,[{key:"componentDidMount",value:function(){this.getReplies()}},{key:"componentDidUpdate",value:function(e){e.children!==this.props.children&&this.getReplies()}},{key:"render",value:function(){var e=this,t=this.state,r=t.showForm,o=t.totalPages,c=t.currentPage,i=t.pagedReplies,u=t.pendingReplies,s=this.props,l=s.comment,m=s.isChild,d=s.level,f=s.parentComment,p=d+1,h=l.author_name,v=l.content,g=l.id,b=l.date,E=l.author_avatar_urls,C=l.status,O="https://ui-avatars.com/api/?size=48&name=".concat(encodeURIComponent(h),"&format=png");E&&(O=E[48]||E[96]);var w=[].concat(a()((null==i?void 0:i.filter((function(e,t){return t<c})).flatMap((function(e){return e})))||[]),a()(u));return y.default.createElement("div",{className:"trellis-comment".concat(m?"-child":""," trellis-comment-new ").concat("approved"!==C?"trellis-comment-pending":"")},"approved"!==C&&y.default.createElement("span",null,"pending"),y.default.createElement("div",{className:"trellis-comment-header"},y.default.createElement("div",{className:"trellis-comment-image"},y.default.createElement("img",{src:O,alt:"author-avatar"})),y.default.createElement("div",{className:"trellis-comment-text"},y.default.createElement(N.a,{as:"p",className:"trellis-comment-author"},h),y.default.createElement("p",{className:"trellis-comment-date"},Object(N.g)(b)))),y.default.createElement(N.a,null,v.rendered),d<2&&"approved"===C&&window.mvt.comments.enabled&&y.default.createElement("button",{type:"button",onClick:this.handleReply,className:"trellis-comment-replyButton"},P.c," ",Object(R.a)("REPLY")),r&&y.default.createElement(j.a,{postId:this.props.postId,parent:f||g,handleSubmit:this.props.handleSubmit||this.handleSubmit,hideForm:this.handleHideForm,parentAuthor:h}),w&&w.map((function(t){var r=e.props.childComments.filter((function(e){return e.parent===t.id}));return y.default.createElement(n,{key:t.id,comment:t,handleSubmit:e.props.handleSubmit||e.handleSubmit,postId:e.props.postId,parentComment:t.parent,children:r,childComments:e.props.childComments,isChild:!0,level:p})})),0!==(null==w?void 0:w.length)&&c<o&&y.default.createElement(x.a,{onAction:this.handleLoadMore}))}}]),n}(y.Component),I=Object(S.a)({root:window.mvt.rest_url});"&order=".concat(window.mvt.comments.order,"&per_page=3");t.a=Object(_.hot)(e)(k),k.defaultProps={childComments:[],isChild:!1,level:0}}).call(this,n(39)(e))},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var r=n(30),a=n(47);window.__pragma__={render:r.default.createElement,fragment:r.default.Fragment};var o=document.getElementById("mv-trellis-comments"),c=o?o.querySelector("form"):null;if(o&&c){var i=Number(o.dataset.postId);Object(r.render)(r.default.createElement(a.a,{postId:i,form:c}),o)}}}]);
//# sourceMappingURL=loadComments.0.18.0.js.map